## 计算机的组成

![](..\imgs\计算机组成.png)

### 指令执行过程

M：主存中某存储单元

指令：操作码、地址码

![](..\imgs\执行指令.png)

1. 取指令

   > (PC) -> MAR
   >
   > M(MAR) -> MDR
   >
   > (MDR) -> IR

2. 分析指令

   > OP(IR) -> CU 取操作码

3. 执行指令

   > Ad(IR) -> MAR  取地址码
   >
   > M(MAR) -> MDR
   >
   > (MDR) -> ACC

### 层次结构

![](..\imgs\层次结构.png)



### Cache



### 寻址

#### 数据寻址

> 隐含寻址，LDA放入ACC中
>
> 立即寻址
>
> 直接寻址
>
> 间接寻址
>
> 寄存器寻址
>
> 寄存器简介寻址

#### 偏移寻址

> 相对寻址，EA = （PC） + A，用于转移指令
>
> 基址寻址， EA = （BR） + A，基址寄存器的内容不能由用户改变
>
> 变址寻址，EA = （IX） + A，变址寄存器的内容可由用户改变，适合变址循环程序

#### 堆栈寻址

操作数存放在堆栈中，使用堆栈指针（SP）作为操作数地址

硬堆栈：使用寄存器实现

软堆栈：使用主存实现

## 指令集

==80-20规律：典型程序中80%的语句仅仅使用处理机中的20%的指令==

### CISC

Complex Instruction Set Computer

一条指令完成一个复杂的基本功能

代表：x86架构

### RISC

Reduced Instruction Set Computer

一个指令完成一个基本的动作，多条指令组合完成一个复杂的功能

代表：ARM架构



## 总线

### 总线仲裁

1. 链式查询方式

   使用BR总线请求线、BS总线忙、BG总线响应线

   BG是串联到I/O设备的

   - 主设备发出请求信号
   - 多个主设备同时要使用总线，则由总线控制器的判优，==位于链中靠前的位置获得电信号==，使用总线
   - 获取总线使用权的主设备开始传送数据

2. 计数器查询方式

   设置设备地址线，取消BG总线响应线

   设备地址线采用并联方式，链接到每一个I/O设备上，通过传送地址位数控制

3. 独立请求方式

   每个设备均有一对总线请求线BRi和总线允许线BGi，排队器经过逻辑判断，按一定的优先次序决定分配总线相应信号



### 接口与端口

接口包含端口，以及逻辑控制单元

端口是指接口电路中可以被CPU直接访问的寄存器